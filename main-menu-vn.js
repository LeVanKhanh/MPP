var mainMenu = [
    {
        title: "Trang Chủ",
        route: "pages/the-planet/home-vn.html",
        hash: "#/home",
        icon: "fas fa-home",
        subItems: [],
    },
    {
        title: "Hành Tinh",
        icon: "fas fa-globe",
        subItems: [
            {
                title: "Giới Thiệu",
                icon: "fas fa-folder",
                subItems: [
                    {
                        title: "Sứ Mệnh, Tầm Nhìn & Giá Trị",
                        route: "pages/the-planet/about/mission-vision-values-vn.html",
                        hash: "#/mission-vision-values",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Hiểu Về Hành Tinh",
                        route: "pages/the-planet/about/understanding-the-planet-vn.html",
                        hash: "#/understanding-the-planet",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                ],
            },
            {
                title: "Tác Giả",
                icon: "fas fa-folder",
                subItems: [
                    {
                        title: "Hồ Sơ Chuyên Nghiệp",
                        route: "pages/the-planet/author/information-vn.html",
                        hash: "#/author-resume",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                ],
            },
        ],
    },
    {
        title: "Đọc và Nghiên Cứu",
        icon: "fas fa-book",
        subItems: [
            {
                title: "Agile",
                icon: "fas fa-folder",
                subItems: [
                    {
                        title: "Tuyên Ngôn Agile",
                        route: "pages/reading-studying/agile-software-development/agile-software-development-vn.html",
                        hash: "#/agile-manifesto",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Scrum",
                        route: "pages/reading-studying/agile-software-development/scrum-vn.html",
                        hash: "#/scrum",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                ],
            },
            {
                title: "Lãnh Đạo",
                icon: "fas fa-folder",
                subItems: [
                    {
                        title: "Lãnh Đạo",
                        route: "pages/reading-studying/leadership/leadership-vn.html",
                        hash: "#/leadership",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Huấn Luyện",
                        route: "pages/reading-studying/leadership/coaching-vn.html",
                        hash: "#/coaching",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Ra Quyết Định",
                        route: "pages/reading-studying/leadership/decision-making-vn.html",
                        hash: "#/decision-making",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Ủy Quyền",
                        route: "pages/reading-studying/leadership/delegation-vn.html",
                        hash: "#/delegation",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Quản Lý Thời Gian",
                        route: "pages/reading-studying/leadership/time-management-vn.html",
                        hash: "#/time-management",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Đánh Giá Kỹ Năng Lãnh Đạo",
                        route: "pages/reading-studying/leadership/assessment-leadership-skills-vn.html",
                        hash: "#/assessment-leadership-skills",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Danh Sách Kiểm Tra",
                        route: "pages/reading-studying/leadership/check-list-vn.html",
                        hash: "#/check-list",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                ],
            },
            {
                title: "Đắc Nhân Tâm",
                icon: "fas fa-folder",
                subItems: [
                    {
                        title: "Phần 1: Kỹ Thuật Cơ Bản Khi Xử Lý Người Khác",
                        route: "pages/reading-studying/how-to-win-friends-n-influence-people/p1-fundamental-techniques-in-handling-people-vn.html",
                        hash: "#/how-to-win-friends-part1",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Phần 2: Sáu Cách Để Mọi Người Thích Bạn",
                        route: "pages/reading-studying/how-to-win-friends-n-influence-people/p2-six-ways-to-make-people-like-you-vn.html",
                        hash: "#/how-to-win-friends-part2",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Phần 3: Làm Người Khác Nghĩ Theo Cách Của Bạn",
                        route: "pages/reading-studying/how-to-win-friends-n-influence-people/p3-how-to-win-people-to-your-way-of-thinking-vn.html",
                        hash: "#/how-to-win-friends-part3",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Phần 4: Trở Thành Nhà Lãnh Đạo",
                        route: "pages/reading-studying/how-to-win-friends-n-influence-people/p4-be-a-leader-vn.html",
                        hash: "#/how-to-win-friends-part4",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Tất Cả Các Nguyên Tắc",
                        route: "pages/reading-studying/how-to-win-friends-n-influence-people/principles-vn.html",
                        hash: "#/how-to-win-friends-principles",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                ],
            },
            {
                title: "Các Lý Thuyết Động Lực",
                icon: "fas fa-folder",
                subItems: [
                    {
                        title: "Tổng Quan",
                        route: "pages/reading-studying/theories-of-motivation/01-theories-of-motivation-vn.html",
                        hash: "#/theories-of-motivation",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thứ Bậc Nhu Cầu của Maslow",
                        route: "pages/reading-studying/theories-of-motivation/02-maslow-hierarchy-of-needs-vn.html",
                        hash: "#/maslow-hierarchy-of-needs",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Lý Thuyết Hai Yếu Tố của Herzberg",
                        route: "pages/reading-studying/theories-of-motivation/03-herzberg-two-factor-theory-vn.html",
                        hash: "#/herzberg-two-factor-theory",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Lý Thuyết Ba Nhu Cầu của McClelland",
                        route: "pages/reading-studying/theories-of-motivation/04-mcclelland-three-needs-theory-vn.html",
                        hash: "#/mcclelland-three-needs-theory",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Lý Thuyết X và Lý Thuyết Y của McGregor",
                        route: "pages/reading-studying/theories-of-motivation/05-mcgregor-theory-x-and-theory-y-vn.html",
                        hash: "#/mcgregor-theory-x-and-y",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Lý Thuyết ERG của Alderfer",
                        route: "pages/reading-studying/theories-of-motivation/06-alderfer-erg-theory-vn.html",
                        hash: "#/alderfer-erg-theory",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Lý Thuyết Động Lực của Mayo",
                        route: "pages/reading-studying/theories-of-motivation/07-mayo-motivation-theory-vn.html",
                        hash: "#/mayo-motivation-theory",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Lý Thuyết Công Bằng của Adam",
                        route: "pages/reading-studying/theories-of-motivation/08-adam-equity-theory-vn.html",
                        hash: "#/adam-equity-theory",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Lý Thuyết Kỳ Vọng của Vroom",
                        route: "pages/reading-studying/theories-of-motivation/09-vroom-expectancy-theory-vn.html",
                        hash: "#/vroom-expectancy-theory",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Lý Thuyết Động Lực của Taylor",
                        route: "pages/reading-studying/theories-of-motivation/10-taylor-motivation-theory-vn.html",
                        hash: "#/taylor-motivation-theory",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Lý Thuyết Tự Hiệu Quả của Bandura",
                        route: "pages/reading-studying/theories-of-motivation/11-bandura-self-efficacy-theory-vn.html",
                        hash: "#/bandura-self-efficacy-theory",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Lý Thuyết Củng Cố của Skinner",
                        route: "pages/reading-studying/theories-of-motivation/12-skinner-reinforcement-theory-vn.html",
                        hash: "#/skinner-reinforcement-theory",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Lý Thuyết Đặt Mục Tiêu của Locke",
                        route: "pages/reading-studying/theories-of-motivation/13-locke-goal-settingtheory-vn.html",
                        hash: "#/locke-goal-setting-theory",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                ],
            },
            {
                title: "Ngụy Biện, Thiên Kiến & Tranh Luận",
                icon: "fas fa-folder",
                subItems: [
                    {
                        title: "Tổng Quan Thiên Kiến Nhận Thức",
                        route: "pages/reading-studying/fallacy-bias-debate/cognitive-bias.html",
                        hash: "#/cognitive-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Người Hành Động-Người Quan Sát",
                        route: "pages/reading-studying/fallacy-bias-debate/actor-observer-bias.html",
                        hash: "#/actor-observer-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Neo Đậu",
                        route: "pages/reading-studying/fallacy-bias-debate/anchoring-bias.html",
                        hash: "#/anchoring-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Chú Ý",
                        route: "pages/reading-studying/fallacy-bias-debate/attention-bias.html",
                        hash: "#/attention-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Phương Pháp Sẵn Có",
                        route: "pages/reading-studying/fallacy-bias-debate/availability-heuristic.html",
                        hash: "#/availability-heuristic",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Hiệu Ứng Xe Nhạc",
                        route: "pages/reading-studying/fallacy-bias-debate/bandwagon-effect.html",
                        hash: "#/bandwagon-effect",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Hỗ Trợ Lựa Chọn",
                        route: "pages/reading-studying/fallacy-bias-debate/choice-supportive-bias.html",
                        hash: "#/choice-supportive-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Xác Nhận",
                        route: "pages/reading-studying/fallacy-bias-debate/confirmation-bias-vn.html",
                        hash: "#/confirmation-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Hiệu Ứng Đóng Khung",
                        route: "pages/reading-studying/fallacy-bias-debate/framing-effect-vn.html",
                        hash: "#/framing-effect",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Tư Duy Đám Đông",
                        route: "pages/reading-studying/fallacy-bias-debate/groupthink-vn.html",
                        hash: "#/groupthink",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Hiệu Ứng Hào Quang",
                        route: "pages/reading-studying/fallacy-bias-debate/halo-effect-vn.html",
                        hash: "#/halo-effect",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Nhìn Lại",
                        route: "pages/reading-studying/fallacy-bias-debate/hindsight-bias-vn.html",
                        hash: "#/hindsight-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Tiêu Cực",
                        route: "pages/reading-studying/fallacy-bias-debate/negativity-bias-vn.html",
                        hash: "#/negativity-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Lạc Quan",
                        route: "pages/reading-studying/fallacy-bias-debate/optimism-bias-vn.html",
                        hash: "#/optimism-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Tự Tin Quá Mức",
                        route: "pages/reading-studying/fallacy-bias-debate/overconfidence-bias-vn.html",
                        hash: "#/overconfidence-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Nhận Thức Chọn Lọc",
                        route: "pages/reading-studying/fallacy-bias-debate/selective-perception-vn.html",
                        hash: "#/selective-perception",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Tự Phục Vụ",
                        route: "pages/reading-studying/fallacy-bias-debate/self-serving-bias-vn.html",
                        hash: "#/self-serving-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Hiện Trạng",
                        route: "pages/reading-studying/fallacy-bias-debate/status-quo-bias-vn.html",
                        hash: "#/status-quo-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Thiên Kiến Sống Sót",
                        route: "pages/reading-studying/fallacy-bias-debate/survivorship-bias-vn.html",
                        hash: "#/survivorship-bias",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                ],
            },
            {
                title: "Hướng Dẫn PMBOK",
                icon: "fas fa-folder",
                subItems: [
                    {
                        title: "Giới Thiệu",
                        route: "pages/reading-studying/pmbok-guide/introduction-vn.html",
                        hash: "#/pmbok-introduction",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                ],
            },
            {
                title: "Sáu Chiếc Mũ Tư Duy",
                icon: "fas fa-folder",
                subItems: [
                    {
                        title: "Sáu Chiếc Mũ Tư Duy",
                        route: "pages/reading-studying/six-thinking-hats/six-thinking-hats-vn.html",
                        hash: "#/six-thinking-hats",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                ],
            },
        ],
    },
    {
        title: "Viết và Ý Kiến",
        icon: "fas fa-folder",
        subItems: [
            {
                title: "Tạo Giá Trị",
                route: "pages/writing-opinion/values-creation.html",
                hash: "#/values-creation",
                icon: "fas fa-file-alt",
                subItems: [],
            },
        ],
    },
    {
        title: "Văn Học",
        icon: "fas fa-book-open",
        subItems: [
            {
                title: "Thơ",
                icon: "fas fa-folder",
                subItems: [
                    {
                        title: "Hai Sắc Hoa Tigôn",
                        route: "pages/literature/poetry/Hai-sac-hoa-tigon.html",
                        hash: "#/hai-sac-hoa-tigon",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Nhớ Rừng (Thế Lữ)",
                        route: "pages/literature/poetry/Nho-rung-The-Lu.html",
                        hash: "#/nho-rung-the-lu",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Quê Hương (Giang Nam)",
                        route: "pages/literature/poetry/Que-huong-Giang-Nam.html",
                        hash: "#/que-huong-giang-nam",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                ],
            },
            {
                title: "Ca Dao - Tục Ngữ",
                icon: "fas fa-folder",
                subItems: [
                    {
                        title: "Tát Nước Đầu Đình",
                        route: "pages/literature/proverbs-and-folk-songs/Tat-nuoc-dau-dinh.html",
                        hash: "#/tat-nuoc-dau-dinh",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                    {
                        title: "Trèo Lên Cây Bưởi Hái Hoa",
                        route: "pages/literature/proverbs-and-folk-songs/Treo-len-cay-buoi-hai-hoa.html",
                        hash: "#/treo-len-cay-buoi-hai-hoa",
                        icon: "fas fa-file-alt",
                        subItems: [],
                    },
                ],
            },
        ],
    },
];

/**
 * Tạo HTML menu từ định nghĩa menu
 * @param {Array} menu - Mảng cấu hình menu
 * @param {boolean} isOpen - Menu group có nên mở hay không (cho cấp cao nhất)
 * @returns {string} Chuỗi HTML được tạo
 */
function generateMenuHTML(menu, isOpen = false) {
    return menu.map(item => {
        if (item.subItems && item.subItems.length > 0) {
            // Parent với submenu
            return `
                <li role="none">
                    <details class="submenu-group" ${isOpen ? 'open' : ''}>
                        <summary class="submenu-summary">
                            <i class="${item.icon}" aria-hidden="true"></i>
                            <span>${item.title}</span>
                        </summary>
                        <ul class="submenu" role="menu">
                            ${generateMenuHTML(item.subItems)}
                        </ul>
                    </details>
                </li>
            `;
        } else {
            // Node lá với link
            return `
                <li role="none">
                    <a role="menuitem" href="${item.hash}" data-route="${item.route}">
                        <i class="${item.icon}" aria-hidden="true"></i> ${item.title}
                    </a>
                </li>
            `;
        }
    }).join('');
}

/**
 * Khởi tạo menu khi DOM sẵn sàng
 */
function initializeMenu() {
    const menuContainer = document.querySelector('.menu');
    if (menuContainer && mainMenu) {
        menuContainer.innerHTML = generateMenuHTML(mainMenu, true);
    }
}
